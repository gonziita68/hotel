{% extends 'client/base.html' %}

{% block title %}Crear Cuenta - O11CE Hotel{% endblock %}

{% block content %}
<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-8">
                <div class="client-form">
                    <div class="text-center mb-4">
                        <h2 class="fw-bold">Crear Cuenta</h2>
                        <p class="text-muted">Únete a nuestra comunidad hotelera</p>
                    </div>
                    
                    <form method="POST" onsubmit="return validateForm(this)" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        <!-- Información Personal -->
                        <div class="mb-4">
                            <h5 class="text-primary fw-bold mb-3">
                                <i class="fas fa-user me-2"></i>Información Personal
                            </h5>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="first_name" class="form-label fw-bold">
                                        <i class="fas fa-user me-2"></i>Nombre *
                                    </label>
                                    <input type="text" class="form-control" id="first_name" name="first_name" required>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="last_name" class="form-label fw-bold">
                                        <i class="fas fa-user me-2"></i>Apellido *
                                    </label>
                                    <input type="text" class="form-control" id="last_name" name="last_name" required>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Información de Contacto -->
                        <div class="mb-4">
                            <h5 class="text-primary fw-bold mb-3">
                                <i class="fas fa-envelope me-2"></i>Información de Contacto
                            </h5>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label fw-bold">
                                        <i class="fas fa-envelope me-2"></i>Email *
                                    </label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label fw-bold">
                                        <i class="fas fa-phone me-2"></i>Teléfono *
                                    </label>
                                    <input type="tel" class="form-control" id="phone" name="phone" required>
                                </div>
                            </div>
                            
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control border-2" id="address" name="address" placeholder="Dirección" style="border-radius: 12px;">
                                <label for="address"><i class="fas fa-map-marker-alt me-1"></i>Dirección</label>
                            </div>
                        
                        <!-- Nacionalidad -->
                        <div class="mb-4">
                            <h5 class="text-primary fw-bold mb-3">
                                <i class="fas fa-globe me-2"></i>Nacionalidad
                            </h5>
                            
                            <div class="mb-3">
                                <label for="nationality" class="form-label fw-bold">
                                    <i class="fas fa-flag me-2"></i>País de origen *
                                </label>
                                <div class="position-relative">
                                    <input type="text" class="form-control" id="nationality" name="nationality" 
                                           placeholder="Escribe para buscar tu país..." 
                                           oninput="filterNationalities()" 
                                           autocomplete="off" required>
                                    <div id="nationalityDropdown" class="dropdown-menu w-100" style="display: none; max-height: 200px; overflow-y: auto;"></div>
                                </div>
                            </div>
                        </div>
                        </div>
                        
                        <!-- Información de Cuenta -->
                        <div class="mb-4">
                            <h5 class="text-primary fw-bold mb-3">
                                <i class="fas fa-key me-2"></i>Información de Cuenta
                            </h5>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="username" class="form-label fw-bold">
                                        <i class="fas fa-user me-2"></i>Usuario *
                                    </label>
                                    <input type="text" class="form-control" id="username" name="username" required>
                                </div>
                                
                                <div class="col-md-4 mb-3">
                                    <label for="password1" class="form-label fw-bold">
                                        <i class="fas fa-lock me-2"></i>Contraseña *
                                    </label>
                                    <div class="position-relative">
                                        <input type="password" class="form-control" id="password1" name="password1" required style="padding-right: 45px;">
                                        <button type="button" 
                                                class="btn position-absolute top-50 end-0 translate-middle-y me-2" 
                                                onclick="togglePassword('password1', 'eyeIcon1')"
                                                style="background: none; border: none; color: #6c757d; z-index: 10;">
                                            <i class="fas fa-eye" id="eyeIcon1"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="col-md-4 mb-3">
                                    <label for="password2" class="form-label fw-bold">
                                        <i class="fas fa-lock me-2"></i>Confirmar *
                                    </label>
                                    <div class="position-relative">
                                        <input type="password" class="form-control" id="password2" name="password2" required style="padding-right: 45px;">
                                        <button type="button" 
                                                class="btn position-absolute top-50 end-0 translate-middle-y me-2" 
                                                onclick="togglePassword('password2', 'eyeIcon2')"
                                                style="background: none; border: none; color: #6c757d; z-index: 10;">
                                            <i class="fas fa-eye" id="eyeIcon2"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-grid mb-3">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-user-plus me-2"></i>Crear Cuenta
                            </button>
                        </div>
                        
                        <hr class="my-4">
                        
                        <div class="text-center">
                            <p class="mb-3">¿Ya tienes cuenta?</p>
                            <a href="{% url 'client_login' %}" class="btn btn-outline-primary">
                                <i class="fas fa-sign-in-alt me-2"></i>Iniciar Sesión
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
            /* Animaciones para las formas flotantes */
            .floating-shapes {
                position: absolute;
                width: 100%;
                height: 100%;
                overflow: hidden;
            }
            
            .shape {
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.1);
                animation: float 6s ease-in-out infinite;
            }
            
            .shape-1 {
                width: 80px;
                height: 80px;
                top: 10%;
                left: 10%;
                animation-delay: 0s;
            }
            
            .shape-2 {
                width: 120px;
                height: 120px;
                top: 20%;
                right: 15%;
                animation-delay: 1s;
            }
            
            .shape-3 {
                width: 60px;
                height: 60px;
                bottom: 30%;
                left: 20%;
                animation-delay: 2s;
            }
            
            .shape-4 {
                width: 100px;
                height: 100px;
                bottom: 20%;
                right: 10%;
                animation-delay: 3s;
            }
            
            .shape-5 {
                width: 40px;
                height: 40px;
                top: 50%;
                left: 5%;
                animation-delay: 4s;
            }
            
            .shape-6 {
                width: 90px;
                height: 90px;
                top: 70%;
                right: 25%;
                animation-delay: 5s;
            }
            
            @keyframes float {
                0%, 100% {
                    transform: translateY(0px) rotate(0deg);
                    opacity: 0.7;
                }
                50% {
                    transform: translateY(-20px) rotate(180deg);
                    opacity: 1;
                }
            }
            
            @keyframes pulse {
                0% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.05);
                }
                100% {
                    transform: scale(1);
                }
            }
            
            @keyframes glow {
                0% {
                    opacity: 0.5;
                    transform: translate(-50%, -50%) scale(1);
                }
                100% {
                    opacity: 0.8;
                    transform: translate(-50%, -50%) scale(1.1);
                }
            }
            
            /* Efectos hover para los botones de ojito */
            .btn:hover i {
                color: #667eea !important;
                transform: scale(1.1);
                transition: all 0.2s ease;
            }
        </style>
        
        <script>
            // Función para mostrar/ocultar contraseñas
            function togglePassword(inputId, iconId) {
                const passwordInput = document.getElementById(inputId);
                const eyeIcon = document.getElementById(iconId);
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    eyeIcon.classList.remove('fa-eye');
                    eyeIcon.classList.add('fa-eye-slash');
                    eyeIcon.style.color = '#667eea';
                } else {
                    passwordInput.type = 'password';
                    eyeIcon.classList.remove('fa-eye-slash');
                    eyeIcon.classList.add('fa-eye');
                    eyeIcon.style.color = '#6c757d';
                }
            }
// Lista de nacionalidades
const nationalities = [
    'Afgano', 'Albanés', 'Alemán', 'Andorrano', 'Angoleño', 'Argentino', 'Armenio', 'Australiano', 'Austriaco', 'Azerbaiyano',
    'Bahameño', 'Bangladesí', 'Barbadense', 'Bareiní', 'Belga', 'Beliceño', 'Beninés', 'Bielorruso', 'Birmano', 'Boliviano',
    'Bosnio', 'Botsuano', 'Brasileño', 'Bruneano', 'Búlgaro', 'Burkinés', 'Burundés', 'Butanés',
    'Caboverdiano', 'Camboyano', 'Camerunés', 'Canadiense', 'Catarí', 'Chadiano', 'Checo', 'Chileno', 'Chino', 'Chipriota',
    'Colombiano', 'Comorense', 'Congoleño', 'Costarricense', 'Croata', 'Cubano',
    'Danés', 'Dominicano', 'Dominiqués',
    'Ecuatoriano', 'Egipcio', 'Salvadoreño', 'Emiratí', 'Eritreo', 'Eslovaco', 'Esloveno', 'Español', 'Estadounidense', 'Estonio', 'Etíope',
    'Fiyiano', 'Filipino', 'Finlandés', 'Francés',
    'Gabonés', 'Gambiano', 'Georgiano', 'Ghanés', 'Granadino', 'Griego', 'Guatemalteco', 'Guineano', 'Guineano-Bissauense', 'Guyanés',
    'Haitiano', 'Hondureño', 'Húngaro',
    'Indio', 'Indonesio', 'Iraní', 'Iraquí', 'Irlandés', 'Islandés', 'Israelí', 'Italiano',
    'Jamaicano', 'Japonés', 'Jordano',
    'Kazajo', 'Keniano', 'Kirguís', 'Kiribatiano', 'Kuwaití',
    'Laosiano', 'Lesotense', 'Letón', 'Libanés', 'Liberiano', 'Libio', 'Liechtensteiniano', 'Lituano', 'Luxemburgués',
    'Macedonio', 'Malgache', 'Malasio', 'Malauí', 'Maldivo', 'Maliense', 'Maltés', 'Marroquí', 'Marshallés', 'Mauriciano', 'Mauritano',
    'Mexicano', 'Micronesio', 'Moldavo', 'Monegasco', 'Mongol', 'Montenegrino', 'Mozambiqueño',
    'Namibio', 'Nauruano', 'Nepalí', 'Nicaragüense', 'Nigeriano', 'Nigerino', 'Norcoreano', 'Noruego', 'Neozelandés',
    'Omaní',
    'Pakistaní', 'Palauano', 'Palestino', 'Panameño', 'Papú', 'Paraguayo', 'Peruano', 'Polaco', 'Portugués',
    'Británico', 'Centroafricano', 'Checo', 'Dominicano',
    'Rumano', 'Ruandés', 'Ruso',
    'Salomonense', 'Samoano', 'Sanmarinense', 'Santotomense', 'Saudí', 'Senegalés', 'Serbio', 'Seychellense', 'Sierraleonés', 'Singapurense',
    'Sirio', 'Somalí', 'Sudafricano', 'Sudanés', 'Sueco', 'Suizo', 'Surinamés', 'Suazi',
    'Tailandés', 'Tanzano', 'Tayiko', 'Timorense', 'Togolés', 'Tongano', 'Trinitense', 'Tunecino', 'Turco', 'Turkmeno', 'Tuvaluano',
    'Ucraniano', 'Ugandés', 'Uruguayo', 'Uzbeko',
    'Vanuatuense', 'Vaticano', 'Venezolano', 'Vietnamita',
    'Yemení',
    'Zambiano', 'Zimbabuense'
];

function filterNationalities() {
    const input = document.getElementById('nationality');
    const dropdown = document.getElementById('nationalityDropdown');
    const filter = input.value.toLowerCase();

    if (filter.length === 0) {
        dropdown.style.display = 'none';
        return;
    }

    const filtered = nationalities.filter(nationality => 
        nationality.toLowerCase().includes(filter)
    ).slice(0, 10);

    if (filtered.length > 0) {
        dropdown.innerHTML = filtered.map(nationality => 
            `<a class="dropdown-item py-2 px-3" href="#" onclick="selectNationality('${nationality}')" style="transition: all 0.2s ease;">
                <i class="fas fa-flag me-2 text-muted"></i>${nationality}
            </a>`
        ).join('');
        dropdown.style.display = 'block';
    } else {
        dropdown.style.display = 'none';
    }
}

function selectNationality(nationality) {
    document.getElementById('nationality').value = nationality;
    document.getElementById('nationalityDropdown').style.display = 'none';
}

// Cerrar dropdown al hacer clic fuera
document.addEventListener('click', function(event) {
    const nationalityInput = document.getElementById('nationality');
    const dropdown = document.getElementById('nationalityDropdown');
    
    if (!nationalityInput.contains(event.target) && !dropdown.contains(event.target)) {
        dropdown.style.display = 'none';
    }
});

// Navegación con teclado
document.getElementById('nationality').addEventListener('keydown', function(e) {
    const dropdown = document.getElementById('nationalityDropdown');
    const items = dropdown.querySelectorAll('.dropdown-item');
    
    if (e.key === 'ArrowDown' && items.length > 0) {
        e.preventDefault();
        items[0].focus();
    } else if (e.key === 'Escape') {
        dropdown.style.display = 'none';
    }
});

// Validación del formulario
function validateForm(form) {
    const password1 = form.password1.value;
    const password2 = form.password2.value;
    
    if (password1 !== password2) {
        alert('Las contraseñas no coinciden');
        return false;
    }
    
    if (password1.length < 6) {
        alert('La contraseña debe tener al menos 6 caracteres');
        return false;
    }
    
    return true;
}

// Agregar efectos hover al botón
document.addEventListener('DOMContentLoaded', function() {
    const submitBtn = document.querySelector('button[type="submit"]');
    if (submitBtn) {
        submitBtn.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-2px)';
            this.style.boxShadow = '0 8px 25px rgba(102, 126, 234, 0.4)';
        });
        
        submitBtn.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
        });
    }
    
    // Agregar efectos a los dropdown items
    document.addEventListener('mouseover', function(e) {
        if (e.target.classList.contains('dropdown-item')) {
            e.target.style.backgroundColor = '#f8f9fa';
            e.target.style.color = '#667eea';
        }
    });
    
    document.addEventListener('mouseout', function(e) {
        if (e.target.classList.contains('dropdown-item')) {
            e.target.style.backgroundColor = '';
            e.target.style.color = '';
        }
    });
});
</script>

{% endblock %}
